# Docusaurus æ–‡æ¡£å¯¼å…¥ SOP (æ ‡å‡†æ“ä½œæµç¨‹)

> æœ¬æ–‡æ¡£æä¾›å®Œæ•´çš„ Markdown æ–‡æ¡£å¯¼å…¥ Docusaurus çš„æ ‡å‡†æ“ä½œæµç¨‹,é€‚ç”¨äºä»»ä½•æ–°çš„æ–‡æ¡£é›†åˆã€‚

## ğŸ“‹ ç›®å½•

- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [è¯¦ç»†æ­¥éª¤](#è¯¦ç»†æ­¥éª¤)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js 18+
- pnpm (æ¨è) æˆ– npm/yarn
- å·²æœ‰çš„ Markdown æ–‡æ¡£é›†åˆ

### ä¸€é”®å¯¼å…¥(é’ˆå¯¹æœ¬é¡¹ç›®)

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /path/to/docusaurus-site4

# 2. æ‰§è¡Œå¯¼å…¥è„šæœ¬
./scripts/import-thinking-docs.sh

# 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm start
```

å°±è¿™ä¹ˆç®€å•!æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3000` æŸ¥çœ‹æ•ˆæœã€‚

## ğŸ“– è¯¦ç»†æ­¥éª¤

### æ­¥éª¤ 1: å‡†å¤‡æºæ–‡æ¡£

**æ–‡æ¡£ç»“æ„è¦æ±‚:**

```
æºæ–‡æ¡£ç›®å½•/
â”œâ”€â”€ 00-æ€»è§ˆ.md              # å¯é€‰:æ€»è§ˆæ–‡æ¡£
â”œâ”€â”€ 01-æ¨¡å—1/
â”‚   â”œâ”€â”€ 01-ä¸»é¢˜1.md
â”‚   â”œâ”€â”€ 02-ä¸»é¢˜2.md
â”‚   â””â”€â”€ ...
â”œâ”€â”€ 02-æ¨¡å—2/
â”‚   â”œâ”€â”€ 03-ä¸»é¢˜3.md
â”‚   â””â”€â”€ ...
â””â”€â”€ ...
```

**å…³é”®ç‚¹:**
- æ–‡ä»¶å’Œæ–‡ä»¶å¤¹åç§°æœ€å¥½ä»¥æ•°å­—å¼€å¤´,ç”¨äºæ§åˆ¶æ’åº(å¦‚ `01-`, `02-`)
- Markdown æ–‡ä»¶éœ€è¦æœ‰æ˜ç¡®çš„ä¸€çº§æ ‡é¢˜ `# æ ‡é¢˜`
- æ”¯æŒä¸­æ–‡è·¯å¾„å’Œæ–‡ä»¶å
- ç›¸å¯¹é“¾æ¥æ ¼å¼: `[é“¾æ¥æ–‡æœ¬](./ç›¸å¯¹è·¯å¾„.md)`

### æ­¥éª¤ 2: é…ç½®è½¬æ¢è„šæœ¬

ç¼–è¾‘ `scripts/import-thinking-docs.sh`:

```bash
# ä¿®æ”¹æºç›®å½•å’Œç›®æ ‡ç›®å½•
SOURCE_DIR="/your/source/path"  # ä½ çš„æºæ–‡æ¡£è·¯å¾„
TARGET_DIR="./docs"             # Docusaurus æ–‡æ¡£ç›®å½•
```

### æ­¥éª¤ 3: æ‰§è¡Œè½¬æ¢

```bash
# æ–¹å¼1: ä½¿ç”¨ä¾¿æ·è„šæœ¬
./scripts/import-thinking-docs.sh

# æ–¹å¼2: ç›´æ¥ä½¿ç”¨ TypeScript è„šæœ¬
pnpm tsx scripts/convert-docs.ts <æºç›®å½•> <ç›®æ ‡ç›®å½•>

# ç¤ºä¾‹
pnpm tsx scripts/convert-docs.ts \
  "/Users/ä½ çš„ç”¨æˆ·å/æ–‡æ¡£é›†åˆ" \
  "./docs"
```

**è½¬æ¢è¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨:**
- âœ… æå–æ–‡æ¡£æ ‡é¢˜å’Œå…ƒæ•°æ®
- âœ… ç”Ÿæˆ Docusaurus frontmatter
- âœ… å¤„ç†å†…éƒ¨é“¾æ¥
- âœ… ä¿æŒç›®å½•ç»“æ„
- âœ… è‡ªåŠ¨æ·»åŠ æ’åºä¿¡æ¯
- âœ… ç”Ÿæˆæ ‡ç­¾åˆ†ç±»

### æ­¥éª¤ 4: é…ç½®ä¾§è¾¹æ 

ç¼–è¾‘ `sidebars.ts`:

```typescript
import type {SidebarsConfig} from '@docusaurus/plugin-content-docs';

const sidebars: SidebarsConfig = {
  mainSidebar: [
    {
      type: 'autogenerated',
      dirName: '.',  // è‡ªåŠ¨ç”Ÿæˆæ•´ä¸ª docs ç›®å½•çš„ä¾§è¾¹æ 
    },
  ],
};

export default sidebars;
```

**è‡ªå®šä¹‰ä¾§è¾¹æ ç»“æ„:**

```typescript
const sidebars: SidebarsConfig = {
  mainSidebar: [
    {
      type: 'doc',
      id: '00-æ¡†æ¶æ€»è§ˆ',
      label: 'ğŸ“š æ¡†æ¶æ€»è§ˆ',
    },
    {
      type: 'category',
      label: 'ğŸ” è§†è§’ç»´åº¦ç¯‡',
      collapsed: false,
      items: [
        {type: 'autogenerated', dirName: '01-è§†è§’ç»´åº¦ç¯‡'},
      ],
    },
    // ... æ›´å¤šåˆ†ç±»
  ],
};
```

### æ­¥éª¤ 5: è‡ªå®šä¹‰é…ç½®

ç¼–è¾‘ `docusaurus.config.ts`:

```typescript
const config: Config = {
  title: 'ä½ çš„ç«™ç‚¹æ ‡é¢˜',
  tagline: 'ä½ çš„ç«™ç‚¹æ ‡è¯­',
  url: 'https://your-site.com',

  // å¦‚æœè¦å°†æ–‡æ¡£ä½œä¸ºé¦–é¡µ
  presets: [
    [
      'classic',
      {
        docs: {
          routeBasePath: '/',  // æ–‡æ¡£ä½œä¸ºæ ¹è·¯å¾„
        },
        blog: false,  // ç¦ç”¨åšå®¢
      },
    ],
  ],

  // æ›´å¤šé…ç½®...
};
```

### æ­¥éª¤ 6: å¯åŠ¨å’Œæµ‹è¯•

```bash
# å¼€å‘æ¨¡å¼(çƒ­é‡è½½)
pnpm start

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build

# æœ¬åœ°é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬
pnpm serve
```

## âš™ï¸ é…ç½®è¯´æ˜

### è½¬æ¢è„šæœ¬é…ç½®é€‰é¡¹

`scripts/convert-docs.ts` æ”¯æŒçš„é…ç½®:

```typescript
interface ConversionConfig {
  sourceDir: string;      // æºæ–‡æ¡£ç›®å½•
  targetDir: string;      // ç›®æ ‡ç›®å½•(é€šå¸¸æ˜¯ ./docs)
  sidebarPath?: string;   // å¯é€‰:ä¾§è¾¹æ é…ç½®è·¯å¾„
}
```

### Frontmatter ç”Ÿæˆè§„åˆ™

è½¬æ¢è„šæœ¬ä¼šè‡ªåŠ¨ç”Ÿæˆä»¥ä¸‹ frontmatter:

```yaml
---
title: "æ–‡æ¡£æ ‡é¢˜"                    # ä»ç¬¬ä¸€ä¸ª # æ ‡é¢˜æå–
sidebar_position: 1                 # ä»æ–‡ä»¶åæ•°å­—å‰ç¼€æå–
description: "æ–‡æ¡£æè¿°"             # ä»å¼•ç”¨å—æå–
tags:                               # è‡ªåŠ¨ç”Ÿæˆæ ‡ç­¾
  - æ€ç»´æ–¹æ³•
  - è®¤çŸ¥å‡çº§
---
```

### è‡ªå®šä¹‰æ ·å¼

ä¸»é¢˜é¢œè‰²åœ¨ `src/css/custom.css` ä¸­é…ç½®:

```css
:root {
  --ifm-color-primary: #5b21b6;     /* ä¸»è‰² */
  --ifm-color-primary-dark: #4c1d95;
  /* ... */
}
```

## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: æ–‡æ¡£é“¾æ¥æ˜¾ç¤º 404

**åŸå› :** ç›¸å¯¹é“¾æ¥è·¯å¾„ä¸æ­£ç¡®

**è§£å†³æ–¹æ¡ˆ:**
- ç¡®ä¿æ–‡æ¡£å†…é“¾æ¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„: `./æ–‡æ¡£.md`
- è½¬æ¢è„šæœ¬ä¼šè‡ªåŠ¨å¤„ç† `.md` æ‰©å±•å
- æ£€æŸ¥æ–‡ä»¶æ˜¯å¦çœŸå®å­˜åœ¨

### Q2: ä¸­æ–‡è·¯å¾„æ— æ³•è®¿é—®

**åŸå› :** URL ç¼–ç é—®é¢˜

**è§£å†³æ–¹æ¡ˆ:**

```typescript
// docusaurus.config.ts
onBrokenLinks: 'warn',  // æ”¹ä¸º warn è€Œä¸æ˜¯ throw
onBrokenMarkdownLinks: 'warn',
```

### Q3: ä¾§è¾¹æ æ’åºä¸æ­£ç¡®

**è§£å†³æ–¹æ¡ˆ:**

1. ç¡®ä¿æ–‡ä»¶åä»¥æ•°å­—å¼€å¤´: `01-`, `02-`, ...
2. ä½¿ç”¨ `sidebar_position` frontmatter:

```yaml
---
title: "æ–‡æ¡£æ ‡é¢˜"
sidebar_position: 1
---
```

### Q4: å›¾ç‰‡æ— æ³•æ˜¾ç¤º

**è§£å†³æ–¹æ¡ˆ:**

1. å°†å›¾ç‰‡æ”¾åœ¨ `static/img/` ç›®å½•
2. ä½¿ç”¨ç»å¯¹è·¯å¾„: `/img/your-image.png`
3. æˆ–ä½¿ç”¨ `require()`: `![Alt](require('./image.png').default)`

### Q5: ä»£ç é«˜äº®è¯­è¨€ä¸æ”¯æŒ

**è§£å†³æ–¹æ¡ˆ:**

ç¼–è¾‘ `docusaurus.config.ts`:

```typescript
prism: {
  theme: prismThemes.github,
  darkTheme: prismThemes.dracula,
  additionalLanguages: ['bash', 'json', 'typescript', 'python'],
},
```

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. æ–‡æ¡£ç»„ç»‡

```
docs/
â”œâ”€â”€ index.md                    # é¦–é¡µ/æ€»è§ˆ
â”œâ”€â”€ 01-getting-started/         # èµ·æ­¥æŒ‡å—
â”‚   â”œâ”€â”€ 01-introduction.md
â”‚   â””â”€â”€ 02-installation.md
â”œâ”€â”€ 02-core-concepts/           # æ ¸å¿ƒæ¦‚å¿µ
â””â”€â”€ 99-reference/               # å‚è€ƒèµ„æ–™
```

**å»ºè®®:**
- ä½¿ç”¨æ•°å­—å‰ç¼€æ§åˆ¶é¡ºåº
- æ¨¡å—åŒ–ç»„ç»‡,æ¯ä¸ªä¸»é¢˜ä¸€ä¸ªæ–‡ä»¶å¤¹
- ä¿æŒç›®å½•å±‚çº§ä¸è¶…è¿‡ 3 å±‚

### 2. Markdown ç¼–å†™è§„èŒƒ

```markdown
---
title: "æ¸…æ™°çš„æ–‡æ¡£æ ‡é¢˜"
description: "ç®€çŸ­çš„æè¿°(ç”¨äº SEO)"
sidebar_position: 1
tags:
  - åˆ†ç±»1
  - åˆ†ç±»2
---

# æ–‡æ¡£æ ‡é¢˜

> æ ¸å¿ƒè¦ç‚¹æˆ–å¼•è¨€

## æ¦‚è¿°

å†…å®¹...

## è¯¦ç»†è¯´æ˜

### å­ä¸»é¢˜

å†…å®¹...

## æ€»ç»“

è¦ç‚¹æ€»ç»“...
```

### 3. å†…éƒ¨é“¾æ¥

```markdown
<!-- âœ… æ¨è: ä½¿ç”¨ç›¸å¯¹è·¯å¾„ -->
å‚è§ [å…¶ä»–æ–‡æ¡£](../02-module/01-topic.md)

<!-- âœ… æ¨è: ä½¿ç”¨æ–‡æ¡£ ID -->
å‚è§ [å…¶ä»–æ–‡æ¡£](/02-module/01-topic)

<!-- âŒ é¿å…: ç»å¯¹è·¯å¾„ -->
å‚è§ [å…¶ä»–æ–‡æ¡£](/docs/02-module/01-topic.md)
```

### 4. å›¾ç‰‡èµ„æº

```markdown
<!-- âœ… æ¨è: æ”¾åœ¨ static ç›®å½• -->
![å›¾ç‰‡æè¿°](/img/architecture.png)

<!-- âœ… æ¨è: ä½¿ç”¨ require (æ”¯æŒå›¾ç‰‡ä¼˜åŒ–) -->
![å›¾ç‰‡æè¿°](require('./assets/diagram.png').default)

<!-- âš ï¸ ç›¸å¯¹è·¯å¾„ä¹Ÿå¯ä»¥ -->
![å›¾ç‰‡æè¿°](./images/screenshot.png)
```

### 5. ä»£ç å—å¢å¼º

````markdown
```typescript title="ç¤ºä¾‹ä»£ç " showLineNumbers
function greet(name: string): string {
  return `Hello, ${name}!`;
}
```

```bash
# é«˜äº®ç‰¹å®šè¡Œ
pnpm install
pnpm start
```
````

### 6. å‘Šç¤ºæ¡† (Admonitions)

```markdown
:::tip æç¤º
è¿™æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„æç¤º!
:::

:::info ä¿¡æ¯
è¡¥å……ä¿¡æ¯...
:::

:::caution æ³¨æ„
éœ€è¦æ³¨æ„çš„äº‹é¡¹
:::

:::danger å±é™©
ä¸¥é‡è­¦å‘Š!
:::
```

### 7. æ€§èƒ½ä¼˜åŒ–

```typescript
// docusaurus.config.ts
export default {
  // å¯ç”¨å¿«é€Ÿåˆ·æ–°
  future: {
    v4: true,
  },

  // ä¼˜åŒ– Markdown å¤„ç†
  markdown: {
    mermaid: true,  // æ”¯æŒ Mermaid å›¾è¡¨
  },

  // ç”Ÿäº§æ„å»ºä¼˜åŒ–
  webpack: {
    jsLoader: (isServer) => ({
      loader: require.resolve('swc-loader'),
      options: {
        // SWC é…ç½®...
      },
    }),
  },
};
```

## ğŸ”„ æ›´æ–°æ–‡æ¡£æµç¨‹

å½“æºæ–‡æ¡£æœ‰æ›´æ–°æ—¶:

```bash
# 1. é‡æ–°è¿è¡Œè½¬æ¢è„šæœ¬
./scripts/import-thinking-docs.sh

# 2. æ£€æŸ¥æ›´æ”¹
git diff

# 3. æµ‹è¯•
pnpm start

# 4. æäº¤
git add .
git commit -m "docs: æ›´æ–°æ–‡æ¡£å†…å®¹"
```

## ğŸ“¦ éƒ¨ç½²

### Vercel éƒ¨ç½²

```bash
# 1. å®‰è£… Vercel CLI
npm i -g vercel

# 2. ç™»å½•
vercel login

# 3. éƒ¨ç½²
vercel --prod
```

### GitHub Pages éƒ¨ç½²

```typescript
// docusaurus.config.ts
export default {
  url: 'https://your-username.github.io',
  baseUrl: '/your-repo-name/',
  organizationName: 'your-username',
  projectName: 'your-repo-name',
};
```

```bash
# éƒ¨ç½²åˆ° GitHub Pages
GIT_USER=your-username pnpm deploy
```

### Netlify éƒ¨ç½²

åˆ›å»º `netlify.toml`:

```toml
[build]
  command = "pnpm build"
  publish = "build"

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
```

## ğŸ¯ è‡ªåŠ¨åŒ–è„šæœ¬æ¸…å•

é¡¹ç›®æä¾›çš„è„šæœ¬å·¥å…·:

| è„šæœ¬ | ç”¨é€” | ä½¿ç”¨æ–¹æ³• |
|------|------|----------|
| `convert-docs.ts` | æ ¸å¿ƒè½¬æ¢é€»è¾‘ | `pnpm tsx scripts/convert-docs.ts <source> <target>` |
| `import-thinking-docs.sh` | ä¸€é”®å¯¼å…¥ | `./scripts/import-thinking-docs.sh` |

## ğŸ“š ç›¸å…³èµ„æº

- [Docusaurus å®˜æ–¹æ–‡æ¡£](https://docusaurus.io/)
- [Markdown è¯­æ³•æŒ‡å—](https://www.markdownguide.org/)
- [MDX æ–‡æ¡£](https://mdxjs.com/)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æ”¹è¿›è¿™ä¸ª SOP!å¦‚æœä½ å‘ç°é—®é¢˜æˆ–æœ‰æ›´å¥½çš„æ–¹æ¡ˆ,è¯·:

1. æäº¤ Issue è¯´æ˜é—®é¢˜
2. æˆ–ç›´æ¥æäº¤ Pull Request

---

**æœ€åæ›´æ–°:** 2025-12-15
**ç»´æŠ¤è€…:** @lhqs
